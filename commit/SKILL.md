---
name: commit
description: Create git commits from staged changes. Use when the user asks to commit, make a commit, git commit, save changes, or any variation of committing code. Triggers on requests like "commit this", "commit my changes", "/commit", or "make a commit".
---

# Commit

Create a git commit from staged changes with a generated message, confirmed by the user before execution.

## Workflow

1. **Check staged changes**

```bash
git diff --cached
```

If nothing is staged, inform the user and stop. Do NOT look at or consider untracked files.

2. **Generate commit message**

Analyze only the staged diff to produce a concise commit message (1-2 sentences) that describes the "why" not the "what". Use imperative mood (e.g., "Add", "Fix", "Update").

3. **Confirm with user**

Present the generated message and ask the user to confirm before committing. Example:

> Proposed commit message:
>
> `Add user authentication endpoint`
>
> Proceed with this commit?

Wait for explicit user approval. If the user provides an alternative message, use that instead.

4. **Commit**

```bash
git commit -m "<confirmed message>"
```

## Rules

- Never include `Co-Authored-By` lines.
- Never include `Generated by` or `Generated with` lines.
- Never consider untracked files — only use `git diff --cached` for context.
- Never stage files automatically — only commit what is already staged.
- Always confirm the message with the user before running `git commit`.
- Use a HEREDOC when the message contains special characters or newlines.
