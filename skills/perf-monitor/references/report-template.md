# Perf Report Template

Use this structure for `perf-report-YYYY-MM-DD.md`.

```markdown
# Performance Report — YYYY-MM-DD (DayOfWeek)

**Lookback window**: Last N day(s)
**Generated by**: perf-monitor skill

---

## Executive Summary

- [3–5 bullet points: most important findings, biggest risks, recommended action]

---

## 1. App Health Overview (New Relic)

| Metric | Current Period | Previous Week | Delta |
|--------|---------------|---------------|-------|
| Avg Response Time | Xms | Xms | +/-X% |
| Throughput | X rpm | X rpm | +/-X% |
| Error Rate | X% | X% | +/-X% |
| Apdex | X | X | +/-X |

---

## 2. Slow Transactions

| # | Transaction | Avg Time | RPM | Error % | Impacted Companies |
|---|-------------|----------|-----|---------|-------------------|
| 1 | Controller#action | Xms | X | X% | company_id: X, Y |
| 2 | ... | ... | ... | ... | ... |

### Root Cause Analysis

#### Transaction: <name>
- **Slow segment**: Database / External / Application code
- **Detail**: <N+1 query, missing index, slow API call, etc.>
- **Impacted companies**: <list of company_ids>

(Repeat for each of top 5)

---

## 3. H12 Timeout Errors (Logtails)

**Total H12 count**: X in last N day(s)

| Endpoint | Count | Most Affected Company |
|----------|-------|-----------------------|
| /path | X | company_id: X |
| ... | ... | ... |

**Most affected company**: company_id X (N timeouts)

---

## 4. 500 Error Pages (Logtails) — CRITICAL

**Total 500 pages served**: X in last N day(s)

> If count > 0: **X customers saw an error page. This requires immediate attention.**

| Endpoint | Count | Affected Companies |
|----------|-------|--------------------|
| /path | X | company_id: X |
| ... | ... | ... |

---

## 5. Slow Queries (PGHero)

| Query (truncated) | Avg Duration | Calls |
|--------------------|-------------|-------|
| SELECT ... FROM ... | Xms | X |
| ... | ... | ... |

**Long-running queries**: (list any currently active)
**Missing indexes**: (list if detected)

---

## 6. Issue Ranking

| Rank | Issue | Score | Customer Visibility | Frequency | Breadth | Severity | Fixability |
|------|-------|-------|--------------------:|----------:|--------:|---------:|-----------:|
| 1 | <description> | X.X | X/10 | X/10 | X/10 | X/10 | X/10 |
| 2 | ... | ... | ... | ... | ... | ... | ... |

---

## 7. Recommended Fix

**Issue**: <#1 ranked issue>
**Impact score**: X.X/10
**Approach**: <brief description of the fix>
**Files to change**: <list>
**Estimated complexity**: Low / Medium / High
```
